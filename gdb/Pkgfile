# Description : GNU Project debugger
# URL         : https://www.gnu.org/software/gdb
# Maintainer  : camille, camille at lzr dot pw
# Depends on  : ncurses

name=gdb
version=9.2
release=1
source=(
"https://ftp.gnu.org/gnu/$name/$name-$version.tar.xz"
python.patch
)

build() {
    cd "$name-$version"

    patch -p 1 -i "$SRC/python.patch"

    sed -i 's|all: info|all: $(true)|1' \
        gdb/doc/Makefile.in

    mkdir build
    cd    build

    ../configure --prefix=/usr

    make

    # ...
    sed -i 's/^exit $st/exit 0/g' ../missing

    make DESTDIR="$PKG" install

    rm -rf "$PKG/usr/"{lib,include,share/info,share/locale}
}
