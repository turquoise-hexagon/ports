# Description : Bare libuv bindings for lua 
# URL         : https://github.com/luvit/luv
# Maintainer  : marin, https://github.com/turquoise-hexagon/ports/issues
# Depends on  :

name=libluv
version=1.30.1
release=2
source=(
"https://github.com/luvit/${name#lib}/releases/download/$version-0/${name#lib}-$version-0.tar.gz"
libluv.pc.in
)

build() {
    cd "${name#lib}-$version-0"

    cp "$SRC/libluv.pc.in" .

    mkdir build
    cd    build

    cmake .. \
        -GNinja \
        -DWITH_SHARED_LIBUV=ON \
        -DLUA_BUILD_TYPE=System \
        -DBUILD_MODULE=OFF \
        -DBUILD_SHARED_LIBS=ON \
        -DCMAKE_INSTALL_PREFIX=/usr

    ninja

    DESTDIR="$PKG" ninja install
}
