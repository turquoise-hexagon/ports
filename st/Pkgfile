# Description : st is a simple terminal implementation for X
# URL         : https://st.suckless.org
# Maintainer  : camille, https://github.com/turquoise-hexagon/ports/issues
# Depends on  : xorg-libxext xorg-libxft

name=st
version=git
release=3
source=()

download() {
	if [[ -d $PKGMK_SOURCE_DIR/$name ]]; then
		git -C "$PKGMK_SOURCE_DIR/$name" fetch --depth 1
		git -C "$PKGMK_SOURCE_DIR/$name" clean -f
		git -C "$PKGMK_SOURCE_DIR/$name" reset --hard "origin/$2"
	else
		git -C "$PKGMK_SOURCE_DIR" clone --depth 1 "$1" -b "$2" "$name"
	fi

	cp -r "$PKGMK_SOURCE_DIR/$name" "$PKGMK_WORK_DIR/src/$name"
}

build() {
    download "https://github.com/turquoise-hexagon/$name" master

    cd "$name"

    make
    make DESTDIR="$PKG" PREFIX=/usr TERMINFO="$PKG/usr/share/terminfo" install

    rm -rf "$PKG/usr/share/terminfo"
}
